<?php
    $database = mysqli_connect('localhost','root','','login_and_register_in_flutter');
    

    $Name = $_POST['Name'];
    $Email = $_POST['Email'];
    $Password = $_POST['Password'];
    $Phone = $_POST['Phone'];

    //checking whether email is already exist or not in table
    $checkSql = "SELECT * FROM user_table WHERE Email = '$Email'";

    $resultsearch=mysqli_query($database,$checkSql);

    //Executing Email check sql query

    if(mysqli_num_rows($resultsearch)>0)
    {
           while($row=mysqli_fetch_array($resultsearch))
          {
              $result["success"] = "3";
              $result["message"] = "User Already Exist";
              $result["data"] = $resultsearch;
              $result["name"] = $Name ;
              echo json_encode($result);
          }
  }
  else{
        //sql query to insert data into user_table 
        $sql_query = "INSERT INTO user_table (Name,Email,Password,Phone) VALUES ('$Name','$Email','$Password','$Phone')";

        if(mysqli_query($database,$sql_query)){
            $successMsg = 'Successfully Registered';
            $json = json_decode($successMsg);
            echo $json;
        }
        else{
            echo 'Try again';
        }
    }
    mysqli_close($database);

?>
